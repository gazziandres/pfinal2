<h3>Datos de env√≠o</h3>
<div class="row justify-content-center">
  <div class="col-4">

    <%= form_for(resource,
      as: resource_name,
      url: orders_path(resource_name),
      html: {class: 'form'}
      ) do |f| %>
      <%= devise_error_messages! %>

      <h2>Datos de Envio</h2>

      <div class="form-group">
        <%= link_to "Connect With Facebook", "/users/auth/facebook" %>
      </div>


      <div class="form-group">
        <%= f.label :phone %>
        <%= f.text_field :phone,
        class: 'form-control',
          autofocus: true %>
      </div>

        <div class="form-group">
          <%= f.label :address %>
          <div class="row">
            <div class="col-md-10">
              <%= f.text_field :address,
              class: 'form-control'%>
            </div>
            <div class="col-md-2">
              <%= link_to '#', class:"btn btn-primary", id:"find-address" do %>
                <i class="fa fa-map-marker"> </i>
              <% end %>
            </div>
          </div>
        </div>


        <div class="actions">
          <%= f.submit "Pagar", class: 'btn btn-success' %>
        </div>
        <% end %>
    </div>
  </div>

  <script>
    $("#find-address").click(function(event){
      $(this).html('<i class="fa fa-spinner fa-spin"> </i>')
      event.preventDefault();

        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(getAddress);
        } else {
          x.innerHTML = "Geolocation is not supported by this browser.";
        }
      });

      function getAddress(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        $.ajax({
          url: '/geocoder/findaddress',
          type: 'GET',
          dataType: 'script',
          data: {latitude: latitude, longitude: longitude}
        })
        .done(function() {
          console.log("success");
        })
        .fail(function() {
          console.log("error");
        })
        .always(function() {
          $("#find-address").html('<i class="fa fa-map-marker"> </i>')

        });

      }
  </script>
